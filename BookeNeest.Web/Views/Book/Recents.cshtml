@using System.Text;

@model IList<BookeNeest.Web.Models.BookViewModel>

@{
    ViewBag.Title = "Book";
}

<h1 class="custom-book-head">Some recent books on site:</h1>

<hr/>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    ;

    @*<div class="dropdown nav nav-tabs">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle btn btn-primary col-md-12"> Recents</a>
        <div class="panel-group dropdown-menu col-md-12">*@
            foreach (var book in Model)
            {
                <div class="panel panel-body panel-primary" style="background-color: aliceblue;">
                    @{
                        StringBuilder authors = new StringBuilder();

                        foreach (var author in book.Authors)
                        {
                            authors.Append(author.Name).Append(", ");
                        }
                        if (authors.Length > 2 && authors[authors.Length - 1] == ' ')
                        {
                            authors.Remove(authors.Length - 2, 2).Append(".");
                        }
                    }

                    <span class="custom-book-fld">
                        ID:
                    </span> @book.Id <br/>

                    <span class="custom-book-fld">
                        Name:
                    </span> @book.Name <br/>

                    <span class="custom-book-fld">
                        Authors:
                    </span> @authors.ToString() <br/>

                    <div class="btn-group ">

                        @Html.ActionLink("Details", "Details", "Book",
                            routeValues: new {bookId = book.Id},
                            htmlAttributes: new {@class = "btn  btn-primary "})

                        @Html.ActionLink("Post Review", "PostReview", "Review",
                            routeValues: new {bookId = book.Id},
                            htmlAttributes: new {@class = "btn  btn-primary " })
                    </div>


                </div>
            }
        @*</div>
    </div>*@
}



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}